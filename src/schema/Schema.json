{
    "$id": "http://mynet.com/schemas/user.json#",
    "title": "User",
    "description": "User profile with connections",
    "type": "object",
    "properties": {
      "id": {
        "description": "positive integer or string of digits",
        "type": "integer",
        "minimum": 1
      },
      "name": { "type": "string", "maxLength": 128 }, 
      "address": {
        "type": "object",
        "additionalProperties": { "type": "string" },
        "maxProperties": 6
      },
      "personal": {
        "type": "object",
        "properties": {
          "age": { "type": "integer", "minimum": 13 },
          "gender": { "enum": ["female", "male"] }
        },
        "required": ["age"],
        "additionalProperties": false
      },
      "connections": {
        "type": "array",
        "maxItems": 150,
        "items": {
          "title": "Connection",
          "description": "User connection schema",
          "type": "object",
          "properties": {
            "id": {
              "type": "integer"
            },
            "name": { "type": "string", "maxLength": 128 },
            "connType": { "type": "string" }
          },
          "oneOf": [
            {
              "properties": {
                "connType": { "enum": ["relative"] },
                "relation": { "type": "string" }
              },
              "dependencies": {
                "relation": ["close"]
              }
            },
            {
              "properties": {
                "connType": { "enum": ["friend", "colleague", "other"] },
                "relation": { "not": {} },
                "close": { "not": {} }
              }
            }
          ],
          "required": ["id", "name","connType"],
          "additionalProperties": false
        }
      },
      "feeds": {
        "title": "feeds",
        "description": "Feeds user subscribes to",
        "type": "object",
        "patternProperties": {
          "^[A-Za-z]+$": { "type": "boolean" }
        },
        "additionalProperties": false
      },
      "createdAt": { "type": "string"}
    },
    "additionalProperties": false
  }